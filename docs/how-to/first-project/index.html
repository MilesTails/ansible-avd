<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Arista Ansible Team">
    <link rel="shortcut icon" href="../../_media/favicon.ico">
    <title>Build your first AVD project &mdash; Arista AVD collection</title>
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:400,700">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/tonsky/FiraCode@1.206/distr/fira_code.css">
    <link rel="stylesheet" href="//use.fontawesome.com/releases/v5.8.1/css/all.css">
    <link rel="stylesheet" href="//use.fontawesome.com/releases/v5.8.1/css/v4-shims.css">
    <link rel="stylesheet" href="../../../css/theme.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
    <link rel="stylesheet" href="../../stylesheets/extra.ivory.css">
    <script src="//code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script>
        hljs.initHighlightingOnLoad();
    </script> 
</head>

<body ontouchstart="">
    <div id="container">
        <aside>
            <div class="home">
                <div class="title">
                    <button class="hamburger"></button>
                    <a href="../../.." class="site-name"> Arista AVD collection</a>
                </div>
                <div class="search">
                    <div role="search">
    <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
        <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
    </form>
</div>
                </div>
            </div>
            <nav class="nav">
                <ul class="root">
                    <li class="toctree-l1"><a class="nav-item" href="../../..">Home</a></li>
                    <li class="toctree-l1"><button class="section nav-item">Installation</button>
<ul class="subnav">
    <li class="toctree-l2"><a class="nav-item" href="../../installation/requirements/">Requirements</a></li>
    <li class="toctree-l2"><a class="nav-item" href="../../installation/setup-environement/">Setup environment</a></li>
    <li class="toctree-l2"><a class="nav-item" href="../../installation/setup-galaxy/">Ansible-galaxy installation</a></li>
    <li class="toctree-l2"><a class="nav-item" href="../../installation/setup-git/">Git installation</a></li>
    <li class="toctree-l2"><a class="nav-item" href="../../installation/development/">Configure development environment</a></li>
</ul></li>
                    <li class="toctree-l1"><a class="nav-item" href="../../getting-started/">Getting Started</a></li>
                    <li class="toctree-l1"><button class="section nav-item">How-To</button>
<ul class="subnav">
    <li class="toctree-l2 current"><a class="nav-item current" href="./">Build your first AVD project</a>
<ul class="subnav">
<li class="toctree-l3"><a class="nav-item toc" href="#abstract">Abstract</a></li>
<li class="toctree-l3"><a class="nav-item toc" href="#requirements">Requirements</a></li>
<li class="toctree-l3"><a class="nav-item toc" href="#topology">Topology</a></li>
<li class="toctree-l3"><a class="nav-item toc" href="#configure-variables">Configure Variables</a></li>
<li class="toctree-l3"><a class="nav-item toc" href="#create-your-avd-playbook">Create your AVD Playbook</a></li>
</ul></li>
</ul></li>
                    <li class="toctree-l1"><button class="section nav-item">Roles documentation</button>
<ul class="subnav">
    <li class="toctree-l2"><a class="nav-item" href="../../../roles/eos_l3ls_evpn/">eos_l3ls_evpn</a></li>
    <li class="toctree-l2"><a class="nav-item" href="../../../roles/eos_cli_config_gen/">eos_cli_config_gen</a></li>
    <li class="toctree-l2"><a class="nav-item" href="../../../roles/cvp_configlet_upload/">cvp_configlet_upload</a></li>
    <li class="toctree-l2"><a class="nav-item" href="../../../roles/eos_config_deploy_cvp/">eos_config_deploy_cvp</a></li>
    <li class="toctree-l2"><a class="nav-item" href="../../../roles/eos_config_deploy_eapi/">eos_config_deploy_eapi</a></li>
    <li class="toctree-l2"><a class="nav-item" href="../../../roles/eos_validate_state/">eos_validate_state</a></li>
    <li class="toctree-l2"><a class="nav-item" href="../../../roles/build_output_folders/">build_output_folders</a></li>
</ul></li>
                    <li class="toctree-l1"><button class="section nav-item">Modules documentation</button>
<ul class="subnav">
    <li class="toctree-l2"><a class="nav-item" href="../../modules/inventory_to_container.rst/">Module Inventory to containers</a></li>
    <li class="toctree-l2"><a class="nav-item" href="../../modules/configlet_build_config.rst/">Module Configlet Build configuration</a></li>
</ul></li>
                    <li class="toctree-l1"><button class="section nav-item">External resources</button>
<ul class="subnav">
    <li class="toctree-l2">
<a class="nav-item" href="https://docs.ansible.com/ansible/latest/user_guide/collections_using.html">Ansible collection user guide</a></li>
    <li class="toctree-l2">
<a class="nav-item" href="https://docs.ansible.com/ansible/latest/user_guide/index.html">Ansible User guide</a></li>
</ul></li>
                    <li class="toctree-l1"><button class="section nav-item">About</button>
<ul class="subnav">
    <li class="toctree-l2"><a class="nav-item" href="../../contributing/">Contribution Guide</a></li>
    <li class="toctree-l2">
<a class="nav-item" href="https://galaxy.ansible.com/arista/cvp">Ansible Galaxy page</a></li>
    <li class="toctree-l2">
<a class="nav-item" href="https://github.com/aristanetworks/ansible-cvp">Arista CloudVision Modules</a></li>
    <li class="toctree-l2">
<a class="nav-item" href="https://github.com/aristanetworks/netdevops-examples">Arista Automation Examples</a></li>
</ul></li>
                </ul>
            </nav>
            <div class="repo">
    <div class="link">
    </div>
    <div class="previous"><a href="../../getting-started/">&laquo; Previous</a></div>
    <div class="next"><a href="../../../roles/eos_l3ls_evpn/">Next &raquo;</a></div>
</div>
        </aside>
        <div id="spacer"><button class="arrow"></button></div>
        <main>
            <div class="home-top">
                <button class="hamburger"></button>
                <a href="../../.." class="site-name"> Arista AVD collection</a>
            </div>
            <div id="main">
                <nav class="breadcrumbs">
<ul>
    <li>How-To</li>
</ul>
</nav>
                <div id="content"><h1 id="how-to-build-your-first-avd-project">How-To build your first AVD project<a class="headerlink" href="#how-to-build-your-first-avd-project" title="Permanent link">#</a></h1>
<h2 id="abstract">Abstract<a class="headerlink" href="#abstract" title="Permanent link">#</a></h2>
<p>This page explains how-to build your first Ansible project leveraging ansible-avd collection. In this tutorial, we will configure an EVPN fabric using Arista eAPI method.</p>
<p><img alt="Figure 1: Example Playbook CloudVision Deployment" src="../../media/figure-2-example-playbook-evpn-deploy-eapi.gif" /></p>
<p>In this post, we will go through all configuration steps to generate <a href="https://www.arista.com/custom_data/downloads/?f=/support/download/DesignGuides/EVPN_Deployment_Guide.pdf">EVPN/VXLAN configuration</a> for EOS devices.</p>
<p>You can organize your work in many different way, but a structure we find useful is something like this:</p>
<ul>
<li>A folder for all your inventories with one sub-folder per inventory. An inventory folder contains all your variables for a given environment like <code>host_vars</code>, <code>group_vars</code>, <code>inventory.yml</code></li>
<li>A folder to store all playbooks. So it is easy to reuse playbooks whatever the inventory is (if you use a coherent syntax)</li>
<li>ansible.cfg at the root of this repository</li>
</ul>
<div class="highlight"><pre><span></span><code>$ tree -L <span class="m">3</span> -d
.
├── inventories
│   └── topology01
│       ├── group_vars
│       ├── host_vars
│       └── inventory.yml
└── playbooks
</code></pre></div>

<h2 id="requirements">Requirements<a class="headerlink" href="#requirements" title="Permanent link">#</a></h2>
<ul>
<li>Ansible runner configured as descried in <a href="../../installation/setup-environement/">this section</a></li>
<li>A set of devices configured with their respective management IP address and username.</li>
<li>Access to eAPI service for all devices.</li>
</ul>
<h2 id="topology">Topology<a class="headerlink" href="#topology" title="Permanent link">#</a></h2>
<p>Here is a high-level overview of the topology</p>
<p><img alt="" src="../../_media/avd-eos-lab-topology-overview.gif" /></p>
<h2 id="configure-variables">Configure Variables<a class="headerlink" href="#configure-variables" title="Permanent link">#</a></h2>
<h3 id="inventory-file">Inventory file<a class="headerlink" href="#inventory-file" title="Permanent link">#</a></h3>
<p>In our inventory, let&rsquo;s list our devices:</p>
<ul>
<li><code>AVD_FABRIC</code> represents complete fabric topology we are going to configure with AVD.</li>
<li><code>AVD_SPINES</code> is a group where all spine devices belongs.</li>
<li><code>AVD_L3LEAFS</code>: is a group to locate all VTEP devices (LEAFs running EVPN/VXLAN). Part of this group, we create one sub-group for every LEAF (single or MLAG) as highlighted below.</li>
<li><code>AVD_LEAF1</code> represent LEAF for POD01 and is for an MLAG pair.</li>
<li><code>AVD_LEAF3</code> represent a single LEAF outside of MLAG.</li>
<li><code>AVD_L2LEAFS</code> represent Aggregation layer in our current design. This layer is optional, but in our design it is in place. It works like for <code>AVD_L3LEAFS</code> group.</li>
<li><code>AVD_TENANTS_NETWORKS</code> is a special group housing 2 groups already configured: <code>AVD_L{2|3}LEAFS</code>. This group will configure VNI/VLAN across the fabric, so we want to make leafs part of the configuration.</li>
<li><code>AVD_SERVERS</code> as similar behavior to previous group. Its goal is to configure downlinks to compute nodes.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1"># vim inventories/topology01/inventory.yml</span>
<span class="nn">---</span>
<span class="nt">AVD</span><span class="p">:</span>
  <span class="nt">children</span><span class="p">:</span>
    <span class="nt">AVD_FABRIC</span><span class="p">:</span>
      <span class="nt">children</span><span class="p">:</span>
        <span class="nt">AVD_SPINES</span><span class="p">:</span>
          <span class="nt">hosts</span><span class="p">:</span>
            <span class="nt">AVD-SPINE1</span><span class="p">:</span>
              <span class="nt">ansible_host</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10.73.254.1</span>
<span class="p p-Indicator">[</span><span class="nv">... output truncated ...</span><span class="p p-Indicator">]</span>
        <span class="nt">AVD_L3LEAFS</span><span class="p">:</span>
          <span class="nt">children</span><span class="p">:</span>
            <span class="nt">AVD_LEAF1</span><span class="p">:</span>
              <span class="nt">hosts</span><span class="p">:</span>
                <span class="nt">AVD-LEAF1A</span><span class="p">:</span>
                  <span class="nt">ansible_host</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10.73.254.11</span>
                <span class="nt">AVD-LEAF1B</span><span class="p">:</span>
                  <span class="nt">ansible_host</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10.73.254.12</span>
            <span class="nt">AVD_LEAF3</span><span class="p">:</span>
              <span class="nt">hosts</span><span class="p">:</span>
                <span class="nt">AVD-LEAF3A</span><span class="p">:</span>
                  <span class="nt">ansible_host</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10.73.254.17</span>
<span class="p p-Indicator">[</span><span class="nv">... output truncated ...</span><span class="p p-Indicator">]</span>
        <span class="nt">AVD_L2LEAFS</span><span class="p">:</span>
          <span class="nt">children</span><span class="p">:</span>
            <span class="nt">AVD_L2LEAF1</span><span class="p">:</span>
              <span class="nt">hosts</span><span class="p">:</span>
                <span class="nt">AVD-AGG01</span><span class="p">:</span>
                  <span class="nt">ansible_host</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10.73.254.21</span>
<span class="p p-Indicator">[</span><span class="nv">... output truncated ...</span><span class="p p-Indicator">]</span>
    <span class="nt">AVD_TENANTS_NETWORKS</span><span class="p">:</span>
      <span class="nt">children</span><span class="p">:</span>
        <span class="nt">AVD_L3LEAFS</span><span class="p">:</span>
        <span class="nt">AVD_L2LEAFS</span><span class="p">:</span>
    <span class="nt">AVD_SERVERS</span><span class="p">:</span>
      <span class="nt">children</span><span class="p">:</span>
        <span class="nt">AVD_L3LEAFS</span><span class="p">:</span>
        <span class="nt">AVD_L2LEAFS</span><span class="p">:</span>
</code></pre></div>

<p>In this file, you can also define management address of all devices. Because in this lab we use Jumphost, we will configure this address in the next section, but at least we configured on which port we will connect to eAPI using <code>ansible_port</code> variable.</p>
<p>Output below is an example of how to configure EOS eAPI authentication</p>
<div class="highlight"><pre><span></span><code><span class="nn">---</span>
<span class="nt">AVD</span><span class="p">:</span>
    <span class="nt">vars</span><span class="p">:</span>
        <span class="nt">ansible_host</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt; your cvp server &gt;</span>
        <span class="nt">ansible_user</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt; your username &gt;</span>
        <span class="nt">ansible_ssh_pass</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt; password &gt;</span>
        <span class="nt">ansible_connection</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">httpapi</span>
        <span class="nt">ansible_network_os</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">eos</span>
        <span class="c1"># Configure privilege escalation</span>
        <span class="nt">ansible_become</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
        <span class="nt">ansible_become_method</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">enable</span>
        <span class="c1"># HTTPAPI configuration</span>
        <span class="nt">ansible_httpapi_port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">443</span>
        <span class="nt">ansible_httpapi_host</span><span class="p">:</span> <span class="s">&#39;{{</span><span class="nv"> </span><span class="s">ansible_host</span><span class="nv"> </span><span class="s">}}&#39;</span>
        <span class="nt">ansible_httpapi_use_ssl</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
        <span class="nt">ansible_httpapi_validate_certs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
</code></pre></div>

<h3 id="avd-variables">AVD Variables<a class="headerlink" href="#avd-variables" title="Permanent link">#</a></h3>
<p>Based on inventory we did in the previous section, it is time to create <code>group_vars</code>.</p>
<h4 id="generic-fabric-information">Generic Fabric Information<a class="headerlink" href="#generic-fabric-information" title="Permanent link">#</a></h4>
<p>All the documentation is available here, but below is a short example. All this information will be configured on all devices.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># vim inventories/inetsix-eapi/group_vars/AVD.yml</span>
<span class="nn">---</span>
<span class="c1"># local users</span>
<span class="nt">local_users</span><span class="p">:</span>
  <span class="c1"># Username with no password configured</span>
  <span class="nt">admin</span><span class="p">:</span>
    <span class="nt">privilege</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">15</span>
    <span class="nt">role</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">network-admin</span>
    <span class="nt">no_password</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>

  <span class="c1"># Username with a password</span>
  <span class="nt">demo</span><span class="p">:</span>
    <span class="nt">privilege</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">15</span>
    <span class="nt">role</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">network-admin</span>
    <span class="nt">sha512_password</span><span class="p">:</span> <span class="s">&quot;&lt;</span><span class="nv"> </span><span class="s">Provide</span><span class="nv"> </span><span class="s">SHA512</span><span class="nv"> </span><span class="s">HASH</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">password</span><span class="nv"> </span><span class="s">&gt;&quot;</span>

<span class="c1"># OOB Management network default gateway.</span>
<span class="nt">mgmt_gateway</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10.73.254.253</span>
<span class="nt">mgmt_destination_networks</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">10.255.2.0/24</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">10.255.3.0/24</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">0.0.0.0/0</span>

<span class="c1"># dns servers.</span>
<span class="nt">name_servers</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">1.1.1.1</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">8.8.8.8</span>

<span class="c1"># NTP Servers IP or DNS name, first NTP server will be prefered, and sourced from Managment VRF</span>
<span class="nt">ntp_servers</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">uk.pool.ntp.org</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">fr.pool.ntp.org</span>
</code></pre></div>

<h4 id="configure-fabric-topology">Configure Fabric topology<a class="headerlink" href="#configure-fabric-topology" title="Permanent link">#</a></h4>
<p>Fabric topology is configured in <a href="https://github.com/inetsix/demo-avd-evpn-eve-ng/blob/master/inventories/inetsix-eapi/group_vars/AVD_FABRIC.yml"><code>inventories/inetsix-eapi/group_vars/AVD_FABRIC.yml</code></a> which is file that covers <code>AVD_FABRIC</code> group we defined in <a href="#inventory-file">inventory</a>. This file contains all the base information to create initial configuration:</p>
<p>You can also refer to <a href="https://github.com/aristanetworks/ansible-avd/blob/devel/ansible_collections/arista/avd/roles/eos_l3ls_evpn/README.md#fabric-topology-variables"><strong>Arista Validated Design</strong> documentation</a> to get a description of every single option available.</p>
<ul>
<li>Subnet to use for underlay, loopback and vtep:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1"># Point to Point Network Summary range, assigned as /31 for each</span>
<span class="c1"># uplink interfaces</span>
<span class="c1"># Assign range larger then total [spines * total potential leafs * 2]</span>
<span class="nt">underlay_p2p_network_summary</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">172.31.255.0/24</span>

<span class="c1"># IP address range for evpn loopback for all switches in fabric,</span>
<span class="c1"># assigned as /32s</span>
<span class="c1"># Assign range larger then total spines + total leafs switches</span>
<span class="nt">overlay_loopback_network_summary</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">192.168.255.0/24</span>

<span class="c1"># VTEP VXLAN Tunnel source loopback IP for leaf switches, assigned in /32s</span>
<span class="c1"># Assign range larger then total leaf switches</span>
<span class="nt">vtep_loopback_network_summary</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">192.168.254.0/24</span>
</code></pre></div>

<ul>
<li>MLAG IP information</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1"># mlag pair IP assignment - assign blocks - Assign range larger then</span>
<span class="c1"># total spines + total leafs switches</span>
<span class="nt">mlag_ips</span><span class="p">:</span>
  <span class="nt">leaf_peer_l3</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10.255.251.0/24</span>
  <span class="nt">mlag_peer</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10.255.252.0/24</span>
</code></pre></div>

<p>Then, you have to describe devices for each role. Don&rsquo;t forget to set management IP here.</p>
<ul>
<li>Spine devices</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1"># Spine Switches</span>
<span class="nt">spine</span><span class="p">:</span>
  <span class="nt">platform</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">vEOS-LAB</span>
  <span class="nt">bgp_as</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">65001</span>
  <span class="c1"># defines the range of acceptable remote ASNs from leaf switches</span>
  <span class="nt">leaf_as_range</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">65101-65132</span>
  <span class="nt">nodes</span><span class="p">:</span>
    <span class="nt">AVD-SPINE1</span><span class="p">:</span>
      <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
      <span class="nt">mgmt_ip</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10.73.254.1/24</span>
    <span class="nt">AVD-SPINE2</span><span class="p">:</span>
      <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>
      <span class="nt">mgmt_ip</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10.73.254.2/24</span>
</code></pre></div>

<ul>
<li>VTEP or L3LEAF devices</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nt">l3leaf</span><span class="p">:</span>
  <span class="nt">defaults</span><span class="p">:</span>
    <span class="nt">virtual_router_mac_address</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">00:1c:73:00:dc:01</span>
    <span class="nt">platform</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">vEOS-LAB</span>
    <span class="nt">bgp_as</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">65100</span>
    <span class="nt">spines</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">AVD-SPINE1</span><span class="p p-Indicator">,</span> <span class="nv">AVD-SPINE2</span><span class="p p-Indicator">]</span>
    <span class="nt">uplink_to_spine_interfaces</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">Ethernet1</span><span class="p p-Indicator">,</span> <span class="nv">Ethernet2</span><span class="p p-Indicator">]</span>
    <span class="nt">mlag_interfaces</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">Ethernet3</span><span class="p p-Indicator">,</span> <span class="nv">Ethernet4</span><span class="p p-Indicator">]</span>
<span class="p p-Indicator">[</span><span class="nv">... output truncated ...</span><span class="p p-Indicator">]</span>
  <span class="nt">node_groups</span><span class="p">:</span>
    <span class="nt">AVD_LEAF1</span><span class="p">:</span>
      <span class="nt">bgp_as</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">65101</span>
      <span class="nt">nodes</span><span class="p">:</span>
        <span class="nt">AVD-LEAF1A</span><span class="p">:</span>
          <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
          <span class="nt">mgmt_ip</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10.73.254.11/24</span>
          <span class="c1"># Interface configured on SPINES to connect to this leaf</span>
          <span class="nt">spine_interfaces</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">Ethernet1</span><span class="p p-Indicator">,</span> <span class="nv">Ethernet1</span><span class="p p-Indicator">]</span>
        <span class="nt">AVD-LEAF1B</span><span class="p">:</span>
          <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>
          <span class="nt">mgmt_ip</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10.73.254.12/24</span>
          <span class="c1"># Interface configured on SPINES to connect to this leaf</span>
          <span class="nt">spine_interfaces</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">Ethernet2</span><span class="p p-Indicator">,</span> <span class="nv">Ethernet2</span><span class="p p-Indicator">]</span>
<span class="p p-Indicator">[</span><span class="nv">... output truncated ...</span><span class="p p-Indicator">]</span>
</code></pre></div>

<p>Complete documentation of all available variables is available in <a href="../../../roles/eos_l3ls_evpn/"><strong>Arista Validated Design documentation</strong></a>. You can also look at <a href="https://github.com/arista-netdevops-community/ansible-avd-cloudvision-demo/blob/master/inventory/group_vars/DC1_FABRIC.yml">variables part of the demo repo</a>.</p>
<h4 id="configure-device-type">Configure device type<a class="headerlink" href="#configure-device-type" title="Permanent link">#</a></h4>
<p>In each variable file related to a type of devices, we have to instruct AVD what is the role of our devices.</p>
<div class="highlight"><pre><span></span><code><span class="nn">---</span>
<span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">spine</span>     <span class="c1"># Must be either spine|l3leaf|l2leaf</span>
</code></pre></div>

<h3 id="configure-vnivlan-across-the-fabric">Configure VNI/VLAN across the Fabric.<a class="headerlink" href="#configure-vnivlan-across-the-fabric" title="Permanent link">#</a></h3>
<p>AVD supports mechanism to create VLANs and VNIs and enable traffic forwarding in your overlay. In current version (<code>v1.0.2</code>), only following design listed below are supported:</p>
<ul>
<li>L2 VLANs</li>
<li>Symetric IRB model</li>
</ul>
<p>Model defines a set of tenants (user&rsquo;s defined) where you can configure VRF or <code>l2vlans</code> or a mix of them. Let&rsquo;s take a look at how we configure such services.</p>
<p>All these configurations shall be configured in file <a href="https://github.com/inetsix/demo-avd-evpn-eve-ng/blob/3a461e0ce25afb25d4e51f620bafd324018c1189/inventories/inetsix-eapi/group_vars/AVD_L3LEAFS.yml"><code>AVD_TENANTS_NETWORKS.yml</code></a></p>
<h4 id="l2-services">L2 Services<a class="headerlink" href="#l2-services" title="Permanent link">#</a></h4>
<p>Configure a pure L2 service using <code>EVPN route type 2</code> only:</p>
<div class="highlight"><pre><span></span><code><span class="nn">---</span>
<span class="nt">tenants</span><span class="p">:</span>
  <span class="c1"># Tenant B Specific Information - Pure L2 tenant</span>
  <span class="nt">Tenant_B</span><span class="p">:</span>
    <span class="nt">mac_vrf_vni_base</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">20000</span>
    <span class="nt">l2vlans</span><span class="p">:</span>
      <span class="nt">201</span><span class="p">:</span>
        <span class="nt">name</span><span class="p">:</span> <span class="s">&#39;B-ELAN-201&#39;</span>
        <span class="nt">tags</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">DC1</span><span class="p p-Indicator">]</span>
</code></pre></div>

<p>Tag option allows to configure VLAN only on a subset of the fabric: all devices with this tag will be configured with this vlan. To configure device <code>TAGS</code> and <code>TENANTS</code> options, go to <a href="../../../roles/eos_l3ls_evpn/#fabric-topology-variables"><strong>Arista Validated Design</strong> documentation</a></p>
<p>In this configuration, VLAN will be created with a tag of <code>201</code> and its attached VNI will be configured with <code>20201</code></p>
<div class="highlight"><pre><span></span><code>AVD-LEAF1A#show vlan 201
VLAN  Name                             Status    Ports
----- -------------------------------- --------- -------------------------------
201   B-ELAN-201                       active    Po3, Po5, Vx1


AVD-LEAF1A#show bgp evpn vni 20201
BGP routing table information for VRF default
Router identifier 192.168.255.3, local AS number 65101
Route status codes: s - suppressed, * - valid, &gt; - active, # - not installed, E - ECMP head, e - ECMP
                    S - Stale, c - Contributing to ECMP, b - backup
                    % - Pending BGP convergence
Origin codes: i - IGP, e - EGP, ? - incomplete
AS Path Attributes: Or-ID - Originator ID, C-LST - Cluster List, LL Nexthop - Link Local Nexthop

         Network                Next Hop              Metric  LocPref Weight  Path
 * &gt;     RD: 192.168.255.3:20201 mac-ip 20201 5001.0011.0000
                                -                     -       -       0       i
 * &gt;     RD: 192.168.255.3:20201 imet 20201 192.168.254.3
                                -                     -       -       0       i
 * &gt;Ec   RD: 192.168.255.5:20201 imet 20201 192.168.254.5
                                192.168.254.5         -       100     0       65001 65102 i
[... output truncated ...]
</code></pre></div>

<h4 id="symetric-irb-model">Symetric IRB model<a class="headerlink" href="#symetric-irb-model" title="Permanent link">#</a></h4>
<p>Configure IRB symetric model, use following structure:</p>
<div class="highlight"><pre><span></span><code><span class="nt">tenants</span><span class="p">:</span>
  <span class="c1"># Tenant A Specific Information - VRFs / VLANs</span>
  <span class="nt">Tenant_A</span><span class="p">:</span>
    <span class="nt">mac_vrf_vni_base</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10000</span>
    <span class="nt">vrfs</span><span class="p">:</span>
      <span class="nt">TENANT_A_PROJECT01</span><span class="p">:</span>
        <span class="nt">vrf_vni</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">11</span>
        <span class="nt">svis</span><span class="p">:</span>
          <span class="nt">110</span><span class="p">:</span>
            <span class="nt">name</span><span class="p">:</span> <span class="s">&#39;PR01-DMZ&#39;</span>
            <span class="nt">tags</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">DC1</span><span class="p p-Indicator">]</span>
            <span class="nt">enabled</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
            <span class="nt">ip_address_virtual</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10.1.10.254/24</span>
          <span class="nt">111</span><span class="p">:</span>
            <span class="nt">name</span><span class="p">:</span> <span class="s">&#39;PR01-TRUST&#39;</span>
            <span class="nt">tags</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">POD02</span><span class="p p-Indicator">]</span>
            <span class="nt">enabled</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
            <span class="nt">ip_address_virtual</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10.1.11.254/24</span>
      <span class="nt">TENANT_A_PROJECT02</span><span class="p">:</span>
        <span class="nt">vrf_vni</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">12</span>
        <span class="nt">vtep_diagnostic</span><span class="p">:</span>
          <span class="nt">loopback</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">100</span>
          <span class="nt">loopback_ip_range</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10.1.255.0/24</span>
        <span class="nt">svis</span><span class="p">:</span>
          <span class="nt">112</span><span class="p">:</span>
            <span class="nt">name</span><span class="p">:</span> <span class="s">&#39;PR02-DMZ-GREEN&#39;</span>
            <span class="nt">tags</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">POD01</span><span class="p p-Indicator">]</span>
            <span class="nt">enabled</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
            <span class="nt">ip_address_virtual</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10.1.12.254/24</span>
</code></pre></div>

<p>Example will create 2 VRFs :</p>
<ul>
<li><code>TENANT_A_PROJECT01</code></li>
<li><code>TENANT_A_PROJECT02</code></li>
</ul>
<p>In <code>TENANT_A_PROJECT01</code>, 2 subnets are created and deployed on devices matching TAGS <code>DC1</code> or <code>POD02</code>:</p>
<ul>
<li><code>10.1.10.0/24</code> with vlan <code>110</code> and vni <code>10110</code></li>
<li><code>10.1.11.0/24</code> with vlan <code>111</code> and vni <code>10111</code></li>
</ul>
<p>In case you deployed this VRF on a MLAG VTEP, an additional vlan is created to allow L3 synchronization within VRF. This vlan is automatically generated with this algorithm:</p>
<div class="highlight"><pre><span></span><code>{{ mlag_ibgp_peering_vrfs.base_vlan + (tenants[tenant].vrfs[vrf].vrf_vni - 1) }}
</code></pre></div>

<p>In addition to that, each EOS devices will allocate a dynamic VLAN per VRF to support <strong>L3 VNI</strong></p>
<div class="highlight"><pre><span></span><code>AVD-LEAF1A#show vlan
VLAN  Name                             Status    Ports
----- -------------------------------- --------- -------------------------------
1     default                          active    Et6, Et7, Et8, PEt6, PEt7, PEt8
110   PR01-DMZ                         active    Cpu, Po3, Po5, Vx1
112   PR02-DMZ-ORANGE                  active    Cpu, Po3, Vx1
201   B-ELAN-201                       active    Po3, Po5, Vx1
1008* VLAN1008                         active    Cpu, Po3, Vx1
1009* VLAN1009                         active    Cpu, Po3, Vx1
3010  MLAG_iBGP_TENANT_A_PROJECT01     active    Cpu, Po3
3011  MLAG_iBGP_TENANT_A_PROJECT02     active    Cpu, Po3
4093  LEAF_PEER_L3                     active    Cpu, Po3
4094  MLAG_PEER                        active    Cpu, Po3

* indicates a Dynamic VLAN


AVD-LEAF1A#show vxlan vni
VNI to VLAN Mapping for Vxlan1
VNI         VLAN        Source       Interface           802.1Q Tag
----------- ----------- ------------ ------------------- ----------
11          1008*       evpn         Vxlan1              1008
12          1009*       evpn         Vxlan1              1009
10110       110         static       Port-Channel5       110
                                     Vxlan1              110
10112       112         static       Vxlan1              112
20201       201         static       Port-Channel5       201
                                     Vxlan1              201
</code></pre></div>

<p>In <code>TENANT_A_PROJECT02</code>, we can also see an optional feature named <strong><code>vtep_diagnostic</code></strong>. This option allows you to create a loopback in this VRF and do some connectivity test.</p>
<h4 id="configure-downlinks">Configure downlinks<a class="headerlink" href="#configure-downlinks" title="Permanent link">#</a></h4>
<p>As we have configured L3LS fabric, EVPN/VXLAN overlay, services, it is now time to configure ports to connect servers. Ports should be configured in <a href="https://github.com/inetsix/demo-avd-evpn-eve-ng/blob/3a461e0ce25afb25d4e51f620bafd324018c1189/inventories/inetsix-eapi/group_vars/AVD_SERVERS.yml"><code>AVD_SERVERS.yml</code></a>.</p>
<p>You first have to configure port profile. it is basically a description of how the port will be configured (<code>access</code> or <code>trunk</code>) and which set of vlan(s) will be configured</p>
<div class="highlight"><pre><span></span><code><span class="nn">---</span>
<span class="nt">port_profiles</span><span class="p">:</span>
  <span class="nt">TENANT_A_B</span><span class="p">:</span>
    <span class="nt">mode</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">trunk</span>
    <span class="nt">vlans</span><span class="p">:</span> <span class="s">&quot;110-111,201&quot;</span>
  <span class="nt">A-PR01-DMZ</span><span class="p">:</span>
    <span class="nt">mode</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">access</span>
    <span class="nt">vlans</span><span class="p">:</span> <span class="s">&quot;110&quot;</span>
</code></pre></div>

<blockquote>
<p>This section uses vlan-id so all of these entries must be configured in <em>TENANTS</em> file</p>
</blockquote>
<p>Then, create port mapping on a per server.</p>
<h5 id="single-home-server">Single home server<a class="headerlink" href="#single-home-server" title="Permanent link">#</a></h5>
<p>If server is connected to only one leaf to the fabric, following template can be used</p>
<div class="highlight"><pre><span></span><code><span class="nt">servers</span><span class="p">:</span>
  <span class="nt">A-PR01-DMZ-POD01</span><span class="p">:</span>     <span class="c1"># Server name</span>
    <span class="nt">rack</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">POD01</span>         <span class="c1"># Informational RACK</span>
    <span class="nt">adapters</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nic</span>
        <span class="nt">server_ports</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">Eth0</span><span class="p p-Indicator">]</span>        <span class="c1"># Server port to connect</span>
        <span class="nt">switch_ports</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">Ethernet3</span><span class="p p-Indicator">]</span>   <span class="c1"># Switch port to connect server</span>
        <span class="nt">switches</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">DC1-AGG01</span><span class="p p-Indicator">]</span>       <span class="c1"># Switch to connect server</span>
        <span class="nt">profile</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">A-PR01-DMZ</span>         <span class="c1"># Port profile to apply</span>
</code></pre></div>

<p>Whereas most of the information are purely optional as not used by AVD, the last 3 entries are required:</p>
<ul>
<li><code>switch_ports</code>: Will be used to configure correct port on the switch.</li>
<li><code>switches</code>: Must be switch name defined in your inventory.</li>
<li><code>profile</code>: Profile created previously.</li>
</ul>
<h5 id="server-connected-to-mlag">Server connected to MLAG<a class="headerlink" href="#server-connected-to-mlag" title="Permanent link">#</a></h5>
<p>In case of connection to MLAG, data structure is the same and only difference is we need to add information about Port-Channel to configure.</p>
<div class="highlight"><pre><span></span><code><span class="nt">servers</span><span class="p">:</span>
  <span class="nt">DCI_RTR01</span><span class="p">:</span>
    <span class="nt">rack</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">DCI</span>
    <span class="nt">adapters</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">server_ports</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">Eth1</span><span class="p p-Indicator">,</span> <span class="nv">Eth2</span><span class="p p-Indicator">]</span>
        <span class="nt">switch_ports</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">Ethernet5</span><span class="p p-Indicator">,</span> <span class="nv">Ethernet5</span> <span class="p p-Indicator">]</span>
        <span class="nt">switches</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">SITE01-BL01A</span><span class="p p-Indicator">,</span> <span class="nv">SITE01-BL01B</span><span class="p p-Indicator">]</span>
        <span class="nt">profile</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">A-PR01-DMZ</span>
        <span class="nt">port_channel</span><span class="p">:</span>
          <span class="nt">state</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">present</span>
          <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">PortChannel5</span>
          <span class="nt">mode</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">active</span>
</code></pre></div>

<h2 id="create-your-avd-playbook">Create your AVD Playbook<a class="headerlink" href="#create-your-avd-playbook" title="Permanent link">#</a></h2>
<h3 id="create-directory-structure">Create directory structure<a class="headerlink" href="#create-directory-structure" title="Permanent link">#</a></h3>
<p>AVD comes with a role to <a href="https://github.com/aristanetworks/ansible-avd/tree/devel/ansible_collections/arista/avd/roles/build_output_folders">generate your folder structure</a>.</p>
<div class="highlight"><pre><span></span><code><span class="nt">tasks</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">build local folders</span>
      <span class="nt">tags</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">build</span><span class="p p-Indicator">]</span>
      <span class="nt">import_role</span><span class="p">:</span>
        <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">arista.avd.build_output_folders</span>
      <span class="nt">vars</span><span class="p">:</span>
        <span class="nt">fabric_dir_name</span><span class="p">:</span> <span class="s">&#39;{{fabric_name}}&#39;</span>
</code></pre></div>

<h3 id="transform-evpn-datamodel-to-device-data-model">Transform EVPN datamodel to device data model<a class="headerlink" href="#transform-evpn-datamodel-to-device-data-model" title="Permanent link">#</a></h3>
<p>AVD provides role <a href="https://github.com/aristanetworks/ansible-avd/blob/devel/ansible_collections/arista/avd/roles/eos_l3ls_evpn/README.md"><strong><code>eos_l3ls_evpn</code></strong></a> role to generate intend YAML device configuration:</p>
<div class="highlight"><pre><span></span><code>  <span class="nt">tasks</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">generate intend variables</span>
      <span class="nt">tags</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">build</span><span class="p p-Indicator">]</span>
      <span class="nt">import_role</span><span class="p">:</span>
        <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">arista.avd.eos_l3ls_evpn</span>
</code></pre></div>

<h3 id="generate-device-configuration-and-documentation">Generate device configuration and documentation<a class="headerlink" href="#generate-device-configuration-and-documentation" title="Permanent link">#</a></h3>
<p>After device data have been generated, AVD can build EOS configuration as well as documentation in markdown format.</p>
<div class="highlight"><pre><span></span><code>  <span class="nt">tasks</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">generate device intended config and documention</span>
      <span class="nt">tags</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">build</span><span class="p p-Indicator">]</span>
      <span class="nt">import_role</span><span class="p">:</span>
        <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">eos_cli_config_gen</span>
</code></pre></div>

<p>From here, you can access your topology and device documentation under <code>documentation</code> in your inventory folder.</p>
<p><img alt="AVD device configuration documentation" src="../../_media/avd-eos-cli-config-gen-doc-overview.png" /></p>
<h3 id="deploy-your-configuration-to-eos-devices">Deploy your configuration to EOS devices<a class="headerlink" href="#deploy-your-configuration-to-eos-devices" title="Permanent link">#</a></h3>
<p>Once your configuration files have been generated, you can use <a href="../../../roles/eos_config_deploy_eapi/"><code>arista.avd.eos_config_deploy_eapi</code></a> to deploy your configuration in replace mode. Because we want to make this deployment explicit, we position tags <code>deploy</code> and <code>never</code> meaning you <strong>must</strong> set this tag in your CLI</p>
<div class="highlight"><pre><span></span><code>  <span class="nt">tasks</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">deploy configuration to device</span>
      <span class="nt">tags</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">deploy</span><span class="p p-Indicator">,</span> <span class="nv">never</span><span class="p p-Indicator">]</span>
      <span class="nt">import_role</span><span class="p">:</span>
         <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">arista.avd.eos_config_deploy_eapi</span>
</code></pre></div>

<h3 id="complete-avd-eapi-playbook">Complete AVD eAPI playbook<a class="headerlink" href="#complete-avd-eapi-playbook" title="Permanent link">#</a></h3>
<p>The overall playbook is given for inforamtion below and you can update it to create your own workflow</p>
<div class="highlight"><pre><span></span><code><span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Build Switch configuration</span>
  <span class="nt">hosts</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">all</span>
  <span class="nt">tasks</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">build local folders</span>
      <span class="nt">tags</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">build</span><span class="p p-Indicator">]</span>
      <span class="nt">import_role</span><span class="p">:</span>
        <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">arista.avd.build_output_folders</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">generate intented variables</span>
      <span class="nt">tags</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">build</span><span class="p p-Indicator">]</span>
      <span class="nt">import_role</span><span class="p">:</span>
        <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">arista.avd.eos_l3ls_evpn</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">generate device intended config and documentation</span>
      <span class="nt">tags</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">build</span><span class="p p-Indicator">]</span>
      <span class="nt">import_role</span><span class="p">:</span>
        <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">arista.avd.eos_cli_config_gen</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">deploy configuration to device</span>
      <span class="nt">tags</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">deploy</span><span class="p p-Indicator">,</span> <span class="nv">never</span><span class="p p-Indicator">]</span>
      <span class="nt">import_role</span><span class="p">:</span>
         <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">arista.avd.eos_config_deploy_eapi</span>
</code></pre></div></div>
                <footer>
    <div class="footer-buttons">
        <div class="previous"><a href="../../getting-started/" title="Getting Started"><span>Previous</span></a></div>
        <div class="next"><a href="../../../roles/eos_l3ls_evpn/" title="eos_l3ls_evpn"><span>Next</span></a></div>
    </div>
    <div class="footer-note">
        <p>
            Built with <a href="http://www.mkdocs.org">MkDocs</a> using
            <a href="https://github.com/daizutabi/mkdocs-ivory">Ivory theme</a>.
        </p>
    </div>
</footer>
            </div>
        </main>
    </div>
    <script>var base_url = '../../..';</script>
    <script src="../../../js/theme.js"></script>
    <script src="../../../search/main.js"></script>
</body>

</html>